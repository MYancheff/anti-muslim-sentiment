---
title: "CensusJoin"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(magrittr)
library(readxl)
library(xlsx)
library(datasets)
library(dplyr)
library(magrittr)
library(markdown)
library(methods)
library(readr)
library(readxl)
library(stringr)
library(tibble)
library(tidyr)

```

Import and tidy SocialExplorer data

```{r, import, TIDY CENSUS DATA}
RelAlabama <- read_excel("/Users/emilyclark/Desktop/Junior/States/RelAlabama.xls", skip = 1, sheet = "Sheet1")


#Chester fixes 1-3 problem

for(i in seq(from = 2, to = 205, by = 3)){
  names(RelAlabama)[i + 1] <- names(RelAlabama)[i]
  names(RelAlabama)[i + 2] <- names(RelAlabama)[i]
}

names(RelAlabama) <- make.names(names(RelAlabama), unique = TRUE)

RelAlabama <- RelAlabama %>% 
  slice(c(3, 20))
#transpose

RelAlabama <- t(RelAlabama) %>% 
  data.frame() %>% 
  rownames_to_column(var = "county") %>% 
  slice(-1) %>% 
  rename(relig = X1, muslim = X2) %>% 
  mutate(county = str_replace_all(county, ".1", "")) %>% 
  mutate(county = str_replace_all(county, ".2", "")) %>%
  spread(key = relig, value= muslim) %>%
  mutate(county = str_replace_all(county, " .County..Alabama", ""))
```

Import FIPS. Unite 

```{r}

#FIPS <- read_excel("/Users/emilyclark/Desktop/Junior/States/US_FIPS_Codes.xls", col_names = FALSE) 


#FIPSAl <- FIPS %>% filter(X1 == "Alabama") %>%
   #rename(state = X1, county = X2, StateFIPS = X3, CountyFIPS = X4) %>%
   #select(-`state`) %>%
   #unite(FIPS, StateFIPS, CountyFIPS, sep = "")

```

Import total population
```{r}
#totalpop <- read_excel("/Users/emilyclark/Desktop/Junior/States/PopAlabama.xls", skip = 1, sheet = "Sheet1")

#totalpop_long <- t(totalpop) %>%
  #data.frame() %>% 
  #rownames_to_column(var = "county") %>%
  #rename(TotalPop = X3, PopDensity = X4, Area = X5) %>%
  #select(`county`, `TotalPop`, `PopDensity`, `Area`) %>%
  #mutate(county = str_replace_all(county, " County, Alabama", ""))


```

Join
```{r}
#relFIPS <- RelAlabama %>% left_join(FIPSAl, by="county")
#relFIPSpop <- relFIPS %>% left_join(totalpop_long, by = "county")

```


```{r, Alaska}


```

```{r, Arizona}


```


```{r, Arkansas}


```

```{r, California}


```


```{r, Colorado}



```


```{r, Connecticut}



```

```{r, Delaware}


```

```{r, Florida}


```


```{r, Georgia}



```


```{r, Hawaii}


```

```{r, Idaho}


```

```{r, Illinois}


```

```{r, Indiana}


```

```{r, Iowa}



```


```{r, Kansas}


```


```{r, Kentucky}


```

```{r, Louisiana}


```


```{r, Maine}


```


```{r, Maryland}


```

```{r, Massachusetts}


```

```{r, Michigan}



```


```{r, Minnesota}

```

```{r, Mississippi}


```

```{r, Missouri}


```


```{r, Montana}


```


```{r, Nebraska}



```

```{r, Nevada}


```


```{r, New Hampshire}



```


```{r, New Jersey}


```

```{r, New Mexico}


```


```{r, New York}


```


```{r, North Carolina}


```


```{r, North Dakota}


```


```{r, Ohio}


```

```{r, Oklahoma}


```


```{r, Oregon}


```


```{r, Pennsyvania}


```

```{r, Rhode Island}


```

```{r, South Carolina}


```


```{r, South Dakota}


```


```{r, Tennessee}


```

```{r, Texas}


```

```{r, Utah}


```


```{r, Vermont}


```

```{r, Virgina}


```

```{r, Washington}


```

```{r, West Virgina}


```

```{r, Wisconsin}


```


```{r, Wyoming}

```















